
<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>C'√® sempre un motivo per non licenziarsi</title>
  <meta name="description" content="Frasi ironiche e motivazionali per non licenziarsi... ancora.">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 40px;
      background-color: #f9f9f9;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 10px;
    }
    .frase {
      font-size: 1.5em;
      margin: 20px 0;
      min-height: 3em;
      font-style: italic;
    }
    #cuore {
      font-size: 2em;
      color: white;
      background: transparent;
      border: none;
      cursor: pointer;
      transition: transform 0.2s ease, color 0.3s ease;
    }
    #cuore:hover {
      transform: scale(1.2);
      color: #ff4081;
    }
    #cuore.clicked,
    #cuore.votato {
      color: #ff4081;
    }
    #counter {
      font-size: 1em;
      margin-top: 5px;
    }
    .bottoni {
      margin: 30px 0;
    }
    .bottoni button {
      margin: 0 10px;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }
    form {
      max-width: 400px;
      margin: 40px auto;
      text-align: left;
    }
    textarea {
      width: 100%;
      padding: 10px;
      font-size: 1em;
      margin-bottom: 15px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    form button {
      width: 100%;
      background-color: #0073aa;
      color: white;
      font-size: 1em;
      padding: 10px;
      border: none;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <h1>C'√® sempre un motivo per non licenziarsi</h1>
  <div class="frase" id="frase">Caricamento frase...</div>

  <div class="bottoni">
    <button onclick="generaFrase()">üé≤ Nuova Frase</button>
    <button onclick="condividiFrase()">üîó Condividi</button>
  </div>

  <div>
    <p>Ti piace questa frase?</p>
    <button id="cuore" onclick="votaFrase()">‚ù§Ô∏è</button>
    <div id="counter">0 voti</div>
  </div>

  <form id="suggerimentoForm">
    <h2>Hai una frase da suggerire?</h2>
    <label for="fraseSuggerita">Scrivila qui sotto:</label>
    <textarea id="fraseSuggerita" name="frase" rows="4" required></textarea>
    <button type="submit">Invia suggerimento</button>
  </form>

  <script>
    const frasi = [
      "Ricordati, hai un mutuo trentennale!",
      "Lo stipendio non compra la felicit√†, ma paga le bollette!",
      "Mollare tutto e aprire un chiringuito ai Caraibi √® un bel sogno‚Ä¶ peccato che manchino i Caraibi, il chiringuito e i soldi.",
      "Se te ne vai, chi spiegher√† al nuovo assunto il nuovo progetto deprecato 2 anni fa?",
      "Non lasciare il lavoro finch√© non hai un piano B‚Ä¶ e no, ‚Äòvincere alla lotteria‚Äô non conta!",
      "Ogni giorno √® una nuova opportunit√†‚Ä¶ di aggiornare il curriculum.",
      "Lavorare qui √® difficile, ma trovare un nuovo lavoro lo √® di pi√π",
      "Sei gi√† sopravvissuto finora, un altro giorno non ti uccider√†‚Ä¶ probabilmente."
    ];
    let fraseAttuale = "";

    function generaFrase() {
      const indice = Math.floor(Math.random() * frasi.length);
      const frase = frasi[indice];
      fraseAttuale = frase;
      document.getElementById("frase").textContent = frase;

      const cuore = document.getElementById("cuore");
      cuore.classList.remove("clicked", "votato");
      const voto = localStorage.getItem("voto_" + frase);
      if (voto === "‚ù§Ô∏è") {
        cuore.classList.add("votato");
        cuore.disabled = true;
      } else {
        cuore.disabled = false;
      }

      const count = localStorage.getItem("count_" + frase) || 0;
      document.getElementById("counter").textContent = `${count} voti`;
    }

    function votaFrase() {
      if (!fraseAttuale) return;
      const cuore = document.getElementById("cuore");
      cuore.disabled = true;
      cuore.classList.add("clicked", "votato");
      localStorage.setItem("voto_" + fraseAttuale, "‚ù§Ô∏è");
      const key = "count_" + fraseAttuale;
      const current = parseInt(localStorage.getItem(key) || "0");
      const newCount = current + 1;
      localStorage.setItem(key, newCount);
      document.getElementById("counter").textContent = `${newCount} voti`;
      inviaLike(fraseAttuale);
    }

    async function inviaLike(frase) {
      try {
        await fetch("https://script.google.com/macros/s/AKfycbyF_f2zGlAGDXM-6512aYOKos8iFwTy6kFPy3OfxEwbaW7nj_kZccxgEh6avBkAkwTmQQ/exec", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ tipo: "like", frase: frase })
        });
      } catch (err) {
        console.error("Errore invio like", err);
      }
    }

    document.addEventListener("DOMContentLoaded", generaFrase);

    document.getElementById("suggerimentoForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const frase = document.getElementById("fraseSuggerita").value.trim();
      if (!frase) return alert("Scrivi una frase!");

      try {
        await fetch("https://script.google.com/macros/s/AKfycbyF_f2zGlAGDXM-6512aYOKos8iFwTy6kFPy3OfxEwbaW7nj_kZccxgEh6avBkAkwTmQQ/exec", {
      mode: "no-cors",
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            tipo: "suggerimento",
            frase: frase,
            userAgent: navigator.userAgent,
            ip: ""
          })
        });
        
        this.reset();
        alert("‚úÖ Suggerimento inviato! Grazie!");
      } catch (err) {
        console.error("Errore invio suggerimento", err);
        alert("‚ùå Errore invio suggerimento. Riprova pi√π tardi.");
      }
    });

    function condividiFrase() {
      const testo = encodeURIComponent(fraseAttuale || "C'√® sempre un motivo per non licenziarsi!");
      const url = window.location.href;
      navigator.share
        ? navigator.share({ text: testo, url })
        : window.open(`https://wa.me/?text=${testo} ${url}`, "_blank");
    }
  </script>
</body>
</html>
